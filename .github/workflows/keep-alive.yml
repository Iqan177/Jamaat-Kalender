name: Keep Render Alive

on:
  schedule:
    # L√§uft alle 14 Minuten - h√§lt Render Service wach
    - cron: '*/14 * * * *'
  
  # Optional: Erlaubt manuelles Ausf√ºhren
  workflow_dispatch:

jobs:
  ping:
    runs-on: ubuntu-latest
    steps:
      - name: Ping Render Health Endpoint
        run: |
          echo "üîÑ Pinging Render API..."
          response_code=$(curl -s -o /dev/null -w "%{http_code}" "https://jamaat-kalender.onrender.com/api/health")
          echo "Response Code: $response_code"
          
          if [ "$response_code" -eq 200 ]; then
            echo "‚úÖ Ping successful - Service is alive!"
          else
            echo "‚ö†Ô∏è Ping response: $response_code"
            echo "‚ÑπÔ∏è Service might be starting up..."
          fi
          
          echo "‚úÖ Ping completed at $(date +'%Y-%m-%d %H:%M:%S')"
